(this["webpackJsonpadmin-app"]=this["webpackJsonpadmin-app"]||[]).push([[0],{196:function(e,a){},235:function(e,a,t){e.exports=t(410)},240:function(e,a,t){},241:function(e,a,t){},264:function(e,a,t){},265:function(e,a,t){},266:function(e,a,t){},371:function(e,a,t){},409:function(e,a,t){},410:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(18),l=t.n(c),o=(t(240),t(40)),i=(t(241),t(166),t(424)),s=t(422),u=t(414),m=t(51),d=t(39),p=t(36),f=t.n(p),g=t(17),b=t(45),h="LOGIN_REQUEST",E="LOGIN_FAILURE",y="LOGIN_SUCCESS",v="LOGOUT_REQUEST",O="LOGOUT_SUCCESS",j="LOGOUT_FAILURE",k="USER_REGISTER_REQUEST",S="USER_REGISTER_SUCCESS",I="USER_REGISTER_FAILURE",w="GET_ALL_CATEGORIES_REQUEST",C="GET_ALL_CATEGORIES_SUCCESS",x="GET_ALL_CATEGORIES_FAILURE",_="ADD_NEW_CATEGORY_REQUEST",T="ADD_NEW_CATEGORY_SUCCESS",L="ADD_NEW_CATEGORY_FAILURE",R="DEL_CATEGORY_REQUEST",U="DEL_CATEGORY_SUCCESS",A="GET_ALL_PRODUCTS_SUCCESS",N="ADD_PRODUCT_REQUEST",D="ADD_PRODUCT_SUCCESS",G="ADD_PRODUCT_FAILURE",F=t(195),P=t.n(F),z=t(89),M={token:null,user:{firstName:"",lastName:"",email:"",picture:""},authenticate:!1,authenticating:!1,loading:!1,error:null,message:""},J={error:null,message:"",loading:!1},Q=t(108),B={products:[],loading:!1},K=t(90),V={categories:[],loading:!1,error:null},Y=function e(a,t,n){var r=[];if(void 0==a)return[].concat(Object(Q.a)(t),[{_id:n._id,name:n.name,slug:n.slug,children:[]}]);var c,l=Object(K.a)(t);try{for(l.s();!(c=l.n()).done;){var o=c.value;if(o._id==a){var i={_id:n._id,name:n.name,slug:n.slug,parentId:n.parentId,children:[]};r.push(Object(g.a)(Object(g.a)({},o),{},{children:o.children.length>0?[].concat(Object(Q.a)(o.children),[i]):[i]}))}else r.push(Object(g.a)(Object(g.a)({},o),{},{children:o.children?e(a,o.children,n):[]}))}}catch(s){l.e(s)}finally{l.f()}return r},q=t(196),W=t.n(q),H=Object(z.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,a=arguments.length>1?arguments[1]:void 0;switch(console.log(a),a.type){case h:e=Object(g.a)(Object(g.a)({},e),{},{authenticating:!0});break;case y:e=Object(g.a)(Object(g.a)({},e),{},{user:a.payload.user,token:a.payload.token,authenticate:!0,authenticating:!1});break;case v:e=Object(g.a)(Object(g.a)({},e),{},{loading:!0});break;case O:e=Object(g.a)({},M);break;case j:e=Object(g.a)(Object(g.a)({},e),{},{error:a.payload.error,loading:!1})}return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case k:e=Object(g.a)(Object(g.a)({},e),{},{loading:!0});break;case S:e=Object(g.a)(Object(g.a)({},e),{},{loading:!1,message:a.payload.message});break;case I:e=Object(g.a)(Object(g.a)({},e),{},{loading:!1,error:a.payload.error})}return e},category:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case C:e=Object(g.a)(Object(g.a)({},e),{},{categories:a.payload.categories});break;case _:e=Object(g.a)(Object(g.a)({},e),{},{loading:!0});break;case T:var t=a.payload.category,n=Y(t.parentId,e.categories,t);console.log("updated categoires",n),e=Object(g.a)(Object(g.a)({},e),{},{categories:n,loading:!1});break;case L:e=Object(g.a)({},V);break;case R:e=Object(g.a)(Object(g.a)({},e),{},{loading:!0});break;case U:console.log("deleted categoires");var r=e.categories.slice(),c=r.findIndex((function(e){return e._id===a.payload}));-1===c&&(c=r.findIndex((function(e){return e.children.parentId===a.payload}))),r.splice(c,1),console.log(c),e=Object(g.a)(Object(g.a)({},e),{},{categories:Object(Q.a)(r)});break;case x:e=Object(g.a)({},V)}return e},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case A:e=Object(g.a)(Object(g.a)({},e),{},{products:a.payload.products,loading:!1});break;case N:e=Object(g.a)(Object(g.a)({},e),{},{loading:!0});break;case D:e=Object(g.a)(Object(g.a)({},e),{},{products:[].concat(Object(Q.a)(e.products),[a.payload.product]),loading:!1})}return e},order:W.a}),X=t(197),$=Object(z.d)(H,Object(z.a)(X.a)),Z=window.localStorage.getItem("token"),ee=P.a.create({baseURL:"http://localhost:2000/api",headers:{Authorization:Z?"Bearer ".concat(Z):""}});ee.interceptors.request.use((function(e){var a=$.getState().auth;return a.token&&(e.headers.Authorization="bearer ".concat(a.token)),e})),ee.interceptors.response.use((function(e){return e}),(function(e){var a=e.response.status;return 501!==a&&404!==a||(localStorage.clear(),$.dispatch({type:O})),Promise.reject(e)}));var ae=ee,te=function(){return function(){var e=Object(b.a)(f.a.mark((function e(a){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:w}),e.prev=1,e.next=4,ae.get("/category/getcategory");case 4:t=e.sent,console.log(t),200===t.status?(n=t.data.categoryList,a({type:C,payload:{categories:n}})):a({type:x,payload:{error:t.data.error}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}()},ne=function(e){Object(d.c)((function(e){return e.auth}));var a=Object(d.b)(),t=function(){a(function(){var e=Object(b.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:v}),e.next=3,ae.post("/admin/signout");case 3:200===(t=e.sent).status?(localStorage.clear(),a({type:O})):a({type:j,payload:{error:t.data.error}});case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())};return r.a.createElement(s.a,{collapseOnSelect:!0,fixed:"top",expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(u.a,{fluid:!0},r.a.createElement(m.b,{to:"/",className:"navbar-brand"},"Admin Dashboard"),r.a.createElement(s.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(s.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(i.a,{className:"mr-auto"}),r.a.createElement(i.a,null,r.a.createElement("li",{className:"nav-item"},r.a.createElement(m.c,{to:"",className:"nav-link",onClick:t},"Log out"))))))},re=t(415),ce=t(202),le=(t(264),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,null),e.sidebar?r.a.createElement(u.a,{fluid:!0},r.a.createElement(re.a,null,r.a.createElement(ce.a,{md:2,className:"sidebar"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(m.c,{exact:!0,to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/category"},"Category")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/products"},"Products")),r.a.createElement("li",null,r.a.createElement(m.c,{to:"/orders"},"Orders")))),r.a.createElement(ce.a,{md:10,style:{marginLeft:"auto",paddingTop:"60px"}},e.children))):e.children)}),oe=t(416),ie=(t(265),function(e){return r.a.createElement(le,{sidebar:!0},r.a.createElement(oe.a,{style:{margin:"5rem",background:"#fff"},className:"text-center"},r.a.createElement("h1",null,"Welcome to Admin Dashboard"),r.a.createElement("p",null,"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a sear"))," ")}),se=t(419),ue=t(425),me=t(118),de=t(42),pe=(t(266),function(e){var a=Object(d.c)((function(e){return e.auth})),t=Object(d.b)(),n={wrapperCol:{offset:8,span:16}};if(a.authenticate)return r.a.createElement(o.a,{to:"/"});return r.a.createElement("div",{className:"signin"},r.a.createElement(se.a,Object.assign({className:"form"},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",initialValues:{remember:!1},onFinish:function(e){var a;console.log("Success:",e),t((a=e,console.log(a),function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:h}),e.next=3,ae.post("/admin/signin",Object(g.a)({},a));case 3:200===(n=e.sent).status?(r=n.data,c=r.token,l=r.user,localStorage.setItem("token",c),localStorage.setItem("user",JSON.stringify(l)),t({type:y,payload:{token:c,user:l}})):400===n.status&&t({type:E,payload:{error:n.data.error}});case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()))},onFinishFailed:function(e){console.log("Failed:",e)}}),r.a.createElement(se.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp Email c\u1ee7a b\u1ea1n"}]},r.a.createElement(ue.a,null)),r.a.createElement(se.a.Item,{label:"M\u1eadt Kh\u1ea9u",name:"password",rules:[{required:!0,message:"Vui l\xf2ng nh\u1eadp M\u1eadt kh\u1ea9u c\u1ee7a b\u1ea1n"}]},r.a.createElement(ue.a.Password,null)),r.a.createElement(se.a.Item,Object.assign({},n,{name:"remember",valuePropName:"checked"}),r.a.createElement(me.a,null,"Remember me")),r.a.createElement(se.a.Item,n,r.a.createElement(de.a,{type:"primary",htmlType:"submit"},"Submit"))))}),fe=t(48),ge=t(421),be=t(417),he=function(e){return r.a.createElement(ge.a.Group,null,r.a.createElement(ge.a.Label,null,e.label),r.a.createElement(ge.a.Control,{type:e.type,placeholder:e.placeholder,value:e.value,onChange:e.onChange}),r.a.createElement(ge.a.Text,{className:"text-muted"},e.errorMessage))},Ee=function(e){var a=Object(n.useState)(""),t=Object(fe.a)(a,2),c=t[0],l=t[1],i=Object(n.useState)(""),s=Object(fe.a)(i,2),m=s[0],p=s[1],h=Object(n.useState)(""),E=Object(fe.a)(h,2),y=E[0],v=E[1],O=Object(n.useState)(""),j=Object(fe.a)(O,2),w=j[0],C=j[1],x=Object(n.useState)(""),_=Object(fe.a)(x,2),T=(_[0],_[1],Object(d.c)((function(e){return e.auth}))),L=Object(d.c)((function(e){return e.user})),R=Object(d.b)();return T.authenticate?r.a.createElement(o.a,{to:"/"}):L.loading?r.a.createElement("p",null,"Loading...!"):r.a.createElement(le,null,r.a.createElement(u.a,null,L.message,r.a.createElement(re.a,{style:{marginTop:"50px"}},r.a.createElement(ce.a,{md:{span:6,offset:3}},r.a.createElement(ge.a,{onSubmit:function(e){e.preventDefault(),R(function(e){return console.log(e),function(){var a=Object(b.a)(f.a.mark((function a(t){var n,r;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:k}),a.next=3,ae.post("/admin/signup",Object(g.a)({},e));case 3:201===(n=a.sent).status?(r=n.data.message,t({type:S,payload:{message:r}})):400===n.status&&t({type:I,payload:{error:n.data.error}});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}({firstName:c,lastName:m,email:y,password:w}))}},r.a.createElement(re.a,null,r.a.createElement(ce.a,{md:6},r.a.createElement(he,{label:"First Name",placeholder:"First Name",value:c,type:"text",onChange:function(e){return l(e.target.value)}})),r.a.createElement(ce.a,{md:6},r.a.createElement(he,{label:"Last Name",placeholder:"Last Name",value:m,type:"text",onChange:function(e){return p(e.target.value)}}))),r.a.createElement(he,{label:"Email",placeholder:"Email",value:y,type:"email",onChange:function(e){return v(e.target.value)}}),r.a.createElement(he,{label:"Password",placeholder:"Password",value:w,type:"password",onChange:function(e){return C(e.target.value)}}),r.a.createElement(be.a,{variant:"primary",type:"submit"},"Submit"))))))},ye=t(233),ve=function(e){var a=e.component,t=Object(ye.a)(e,["component"]);return r.a.createElement(o.b,Object.assign({},t,{component:function(e){return window.localStorage.getItem("token")?r.a.createElement(a,e):r.a.createElement(o.a,{to:"/signin"})}}))},Oe=t(116),je=t(426),ke=t(418),Se=t(420),Ie=t(427),we=t(423),Ce=function(e){return r.a.createElement(we.a,{title:e.title,centered:!0,visible:e.visible,width:e.size,onCancel:e.cancel,onOk:e.ok},e.children)},xe=t(137),_e=t.n(xe);t(411);_e.a.initializeApp({apiKey:"AIzaSyDHLGN58Ld2gtTao7PMwMElYrQDLA54SGE",authDomain:"content-delivery-b57b7.firebaseapp.com",databaseURL:"https://content-delivery-b57b7.firebaseio.com",projectId:"content-delivery-b57b7",storageBucket:"content-delivery-b57b7.appspot.com",messagingSenderId:"128698018952",appId:"1:128698018952:web:69c547ece616938e4e033d",measurementId:"G-WYL0JQ0TRD"});var Te=_e.a.storage(),Le=t(429),Re=t(430),Ue=t(431),Ae=(t(371),Oe.a.Option);function Ne(e){var a="image/jpeg"===e.type||"image/png"===e.type;a||je.b.error("You can only upload JPG/PNG file!");var t=e.size/1024/1024<2;return t||je.b.error("Image must smaller than 2MB!"),a&&t}var De=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},Ge=function(e){var a=se.a.useForm(),t=Object(fe.a)(a,1)[0],c=Object(n.useState)(!1),l=Object(fe.a)(c,2),o=(l[0],l[1]),i=Object(n.useState)(!1),s=Object(fe.a)(i,2),m=s[0],p=s[1],g=Object(n.useState)([]),h=Object(fe.a)(g,2),E=h[0],y=(h[1],[]),v=Object(d.c)((function(e){return e.category})),O=Object(d.c)((function(e){return e.product})),j=Object(d.b)(),k=[{title:"M\xe3 S\u1ea3n Ph\u1ea9m",dataIndex:"_id",key:"_id",width:"15%"},{title:"\u1ea2nh S\u1ea3n Ph\u1ea9m",dataIndex:"mainImage",key:"mainImage",width:"fit-content",render:function(e){return r.a.createElement("img",{alt:e,src:e,style:{width:"170px",height:"130px"}})}},{title:"T\xean S\u1ea3n Ph\u1ea9m",dataIndex:"name",key:"name"},{title:"T\xean Th\u01b0\u01a1ng Hi\u1ec7u",dataIndex:"brand",key:"age"},{title:"Danh m\u1ee5c",dataIndex:"category",key:"category",width:"fit-content",render:function(e){return r.a.createElement("a",null,e.name)}},{title:"Action",dataIndex:"",key:"x",width:"fit-content",render:function(){return r.a.createElement("a",null,"X\xf3a")}}],S=function(){o(!1),p(!1),y=[]},I=function(e){var a=e.name,t=e.brand,n=e.category,r=e.attrs,c=e.description;console.log(e);var l={name:a,brand:t,description:c,attrs:r,category:n,productImages:y},o=JSON.stringify(l);console.log(o),j(function(e){return function(){var a=Object(b.a)(f.a.mark((function a(t){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:N}),a.next=3,ae.post("/products/create",e,{headers:{"content-type":"application/json"}});case 3:200===(n=a.sent).status?t({type:D,payload:{product:n.data.product}}):t({type:G,payload:n.data.error});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(o)).then((function(e){e&&j(te())})),y=[],p(!1)},w=function(){var e=O.products.map((function(e){return e.attrs}));return console.log(e),r.a.createElement(ke.a,{columns:[{title:"size",dataIndex:"size",key:"size"},{title:"s\u1ed1 l\u01b0\u1ee3ng",dataIndex:"stock",key:"stock"},{title:"Gi\xe1 ti\u1ec1n",dataIndex:"price",key:"price"}],dataSource:e,bordered:"true",pagination:!1})};return r.a.createElement(le,{sidebar:!0},r.a.createElement(u.a,null,r.a.createElement(re.a,null,r.a.createElement(ce.a,{md:12},r.a.createElement("div",{className:"headerContainer",style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h3",null,"Products"),r.a.createElement(de.a,{onClick:function(){return p(!0)}},"Th\xeam S\u1ea3n Ph\u1ea9m")))),r.a.createElement(re.a,null,r.a.createElement(ce.a,{md:12},r.a.createElement(ke.a,{dataSource:O.products,columns:k,bordered:"true",expandable:{expandedRowRender:w}})))),function(){var e=function(){var e=Object(b.a)(f.a.mark((function e(a){var t,n,r,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.onSuccess,n=a.onError,r=a.file,console.log(r),e.next=4,Te.ref();case 4:c=e.sent,(l=c.child("images/".concat(r.name)).put(r)).on("state_changed",(function(e){var a=e.bytesTransferred/e.totalBytes*100;switch(console.log("Upload is "+a+"% done"),e.state){case _e.a.storage.TaskState.PAUSED:console.log("Upload is paused");break;case _e.a.storage.TaskState.RUNNING:console.log("Upload is running")}}),(function(e){n(e)}),(function(){l.snapshot.ref.getDownloadURL().then((function(e){console.log("File available at",e),t(e),y.push({img:e}),console.log("fileList "+y)}))}));case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),a=r.a.createElement("div",null,r.a.createElement(Le.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement(Ce,{title:"Th\xeam S\u1ea3n Ph\u1ea9m",visible:m,size:"600px",cancel:S,style:{top:20},ok:function(){t.validateFields().then((function(e){t.resetFields(),I(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(se.a,{form:t,layout:"horizontal",size:"large"},r.a.createElement(se.a.Item,{label:"T\xean s\u1ea3n ph\u1ea9m",name:"name",labelAlign:"left",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(ue.a,{style:{float:"right",display:"block"},placeholder:"T\xean s\u1ea3n ph\u1ea9m"})),r.a.createElement(se.a.Item,{label:"T\xean th\u01b0\u01a1ng hi\u1ec7u",name:"brand",labelAlign:"left",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(ue.a,{style:{float:"right"},placeholder:"T\xean th\u01b0\u01a1ng hi\u1ec7u"})),r.a.createElement(se.a.Item,{label:"M\xf4 T\u1ea3",name:"description",labelAlign:"left",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(ue.a,{style:{float:"right"},placeholder:"M\xf4 t\u1ea3 s\u1ea3n ph\u1ea9m"})),r.a.createElement(se.a.Item,{name:"category",label:"Ch\u1ecdn danh m\u1ee5c",labelAlign:"left",labelCol:{span:5},wrapperCol:{span:16}},r.a.createElement(Oe.a,{className:"form-control",placeholder:"Ch\u1ecdn danh m\u1ee5c"},function e(a){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(K.a)(a);try{for(r.s();!(t=r.n()).done;){var c=t.value;n.push({value:c._id,name:c.name}),c.children.length>0&&e(c.children,n)}}catch(l){r.e(l)}finally{r.f()}return n}(v.categories).map((function(e){return r.a.createElement(Ae,{key:e.value,value:e.value},e.name)})))),r.a.createElement(se.a.Item,{name:"productImages",label:"\u1ea2nh s\u1ea3n ph\u1ea9m",valuePropName:"fileList",extra:"Ch\u1ecdn \u1ea3nh JPEG ho\u1eb7c PNG",getValueFromEvent:De},r.a.createElement(Se.a,{listType:"picture-card",fileList:E,customRequest:e,beforeUpload:Ne},a)),r.a.createElement(se.a.List,{name:"attrs",label:"Thu\u1ed9c t\xednh"},(function(e,a){var t=a.add,n=a.remove;return r.a.createElement("div",null,e.map((function(a){return r.a.createElement(Ie.b,{key:a.key,style:{display:"flex",marginBottom:8},align:"start"},r.a.createElement(se.a.Item,Object.assign({},a,{name:[a.name,"size"],fieldKey:[a.fieldKey,"size"],rules:[{required:!0,message:"Missing first name"}]}),r.a.createElement(ue.a,{placeholder:"Size"})),r.a.createElement(se.a.Item,Object.assign({},a,{name:[a.name,"stock"],fieldKey:[a.fieldKey,"stock"],rules:[{required:!0,message:"Missing last name"}]}),r.a.createElement(ue.a,{placeholder:"S\u1ed1 L\u01b0\u1ee3ng"})),r.a.createElement(se.a.Item,Object.assign({},a,{name:[a.name,"price"],fieldKey:[a.fieldKey,"price"],rules:[{required:!0,message:"Missing last name"}]}),r.a.createElement(ue.a,{placeholder:"Gi\xe1"})),1===e.length?null:r.a.createElement(Re.a,{onClick:function(){return n(a.name)}}))})),r.a.createElement(se.a.Item,null,r.a.createElement(de.a,{type:"dashed",onClick:function(){t()},block:!0},r.a.createElement(Ue.a,null)," Th\xeam thu\u1ed9c t\xednh")))}))))}())},Fe=function(e){return r.a.createElement(le,{sidebar:!0},"Orders")},Pe=t(428),ze=(t(409),Oe.a.Option),Me=function(e){var a=Object(d.c)((function(e){return e.category})),t=Object(n.useState)(!1),c=Object(fe.a)(t,2),l=c[0],o=c[1],i=Object(n.useState)(!1),s=Object(fe.a)(i,2),m=s[0],p=s[1],g=Object(d.b)(),h=se.a.useForm(),E=Object(fe.a)(h,1)[0],y=Object(n.useState)([{_id:"",name:"",parentId:""}]),v=Object(fe.a)(y,2),O=v[0],j=v[1];Object(n.useEffect)((function(){console.log("Update danh s\xe1ch"),m&&E.setFieldsValue({_id:O._id,name:O.name,parentId:O.parentId})}),[m]);var k=function(e){console.log(e),g(function(e){return function(){var a=Object(b.a)(f.a.mark((function a(t){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:_}),a.next=3,ae.post("/category/create",e);case 3:201===(n=a.sent).status?t({type:T,payload:{category:n.data.category}}):t({type:L,payload:n.data.error});case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e)),o(!1)},S=function(){o(!1),p(!1)},I=function(e){console.log(e),g(function(e){console.log(e);JSON.stringify({_id:e});return function(){var a=Object(b.a)(f.a.mark((function a(t){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t({type:R}),a.next=3,ae.delete("/category/delete/".concat(e));case 3:if(201!==(n=a.sent).status){a.next=9;break}return console.log(n),a.abrupt("return",!0);case 9:console.log(n);case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e)).then((function(e){e&&g(te())}))},w=function e(a){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(K.a)(a);try{for(r.s();!(t=r.n()).done;){var c=t.value;n.push({value:c._id,name:c.name}),c.children.length>0&&e(c.children,n)}}catch(l){r.e(l)}finally{r.f()}return n},C=function(e){console.log("handleEditCategory "+e._id),g(function(e){return function(){var a=Object(b.a)(f.a.mark((function a(t){var n;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ae.put("/category/update",e);case 2:if(201!==(n=a.sent).status){a.next=8;break}return console.log(n),a.abrupt("return",!0);case 8:console.log(n);case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(e)).then((function(e){e&&g(te())})),p(!1)},x=[{title:"id",dataIndex:"_id",key:"_id",width:300},{title:"T\xean Danh m\u1ee5c",dataIndex:"name",key:"name"},{title:"Action",dataIndex:"",key:"x",align:"center",render:function(e){return r.a.createElement(Pe.a,{title:"B\u1ea1n ch\u1eafc ch\u1eafn ch\u1ee9 ??",onConfirm:function(){return I(e._id)}},r.a.createElement("a",{style:{color:"blue"}},"X\xf3a "))}}];return r.a.createElement(le,{sidebar:!0},r.a.createElement(u.a,null,r.a.createElement(re.a,null,r.a.createElement(ce.a,{md:12},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h3",null,"Danh m\u1ee5c"),r.a.createElement("button",{onClick:function(){return o(!0)}},"Th\xeam danh m\u1ee5c")))),r.a.createElement(re.a,null,r.a.createElement(ce.a,{md:12},r.a.createElement(ke.a,{onRow:function(e,a){return{onDoubleClick:function(a){console.log(e),j(e),p(!0)}}},columns:x,expandable:{rowExpandable:function(e){return null!==e.children.parentId&&e.children.length>0}},dataSource:a.categories})))),r.a.createElement(Ce,{visible:l,cancel:S,title:"Th\xeam Danh M\u1ee5c",size:"600px",style:{top:20},ok:function(){E.validateFields().then((function(e){console.log(e),E.resetFields(),k(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(se.a,{form:E,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",size:"medium"},r.a.createElement(se.a.Item,{label:"T\xean danh m\u1ee5c",name:"name"},r.a.createElement(ue.a,{style:{marginLeft:"10px"}})),r.a.createElement(se.a.Item,{name:"parentId"},r.a.createElement(Oe.a,{className:"form-control",placeholder:"Ch\u1ecdn danh m\u1ee5c cha"},w(a.categories).map((function(e){return r.a.createElement(ze,{key:e.value,value:e.value},e.name)})))))),r.a.createElement(Ce,{forceRender:!0,visible:m,cancel:S,title:"S\u1eeda Danh M\u1ee5c",size:"600px",style:{top:20},ok:function(){E.validateFields().then((function(e){console.log("validate form"+e),E.resetFields(),C(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},r.a.createElement(se.a,{form:E,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",size:"medium"},r.a.createElement(se.a.Item,{name:"_id"}),r.a.createElement(se.a.Item,{label:"T\xean danh m\u1ee5c",name:"name"},r.a.createElement(ue.a,{style:{marginLeft:"10px"}})),r.a.createElement(se.a.Item,{name:"parentId"},r.a.createElement(Oe.a,{className:"form-control",placeholder:"Ch\u1ecdn danh m\u1ee5c cha",value:O.parentId},w(a.categories).map((function(e){return r.a.createElement(ze,{key:e.value,value:e.value},e.name)})))))))};var Je=function(){var e=Object(d.b)(),a=Object(d.c)((function(e){return e.auth}));return Object(n.useEffect)((function(){a.authenticate||e(function(){var e=Object(b.a)(f.a.mark((function e(a){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=localStorage.getItem("token"))?(n=JSON.parse(localStorage.getItem("user")),a({type:y,payload:{token:t,user:n}})):a({type:E,payload:{error:"Failed to login"}});case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()),e(function(){var e=Object(b.a)(f.a.mark((function e(a){var t,n,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.post("/initialData");case 2:200===(t=e.sent).status&&(n=t.data,r=n.categories,c=n.products,a({type:C,payload:{categories:r}}),a({type:A,payload:{products:c}})),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(o.d,null,r.a.createElement(ve,{path:"/",exact:!0,component:ie}),r.a.createElement(ve,{path:"/category",component:Me}),r.a.createElement(ve,{path:"/products",component:Ge}),r.a.createElement(ve,{path:"/orders",component:Fe}),r.a.createElement(o.b,{path:"/signin",component:pe}),r.a.createElement(o.b,{path:"/signup",component:Ee})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));window.store=$,l.a.render(r.a.createElement(d.a,{store:$},r.a.createElement(m.a,null,r.a.createElement(Je,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[235,1,2]]]);
//# sourceMappingURL=main.37418009.chunk.js.map